<extend name="Public/common" />
<block name="main">
    <fieldset class="layui-elem-field">
        <legend>{:(isset($detail['id'])?'编辑商户':'新增商户')}</legend>
        <div class="layui-field-box" style="width: 800px">
            <form class="layui-form" action="" method="post">
                <if condition="isset($detail['id'])">
                    <input type="hidden" name="id" value="{$detail['id']}">
                </if>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color:red">*</span> 酒吧名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" required value="{:(isset($detail['title'])?$detail['title']:'')}" lay-verify="required" placeholder="请输入广告名称" class="layui-input">
                    </div>
                </div>

                <div class="layui-upload">
                    <label class="layui-form-label">酒吧LOGO</label>
                    <div class="layui-input-block">
                        <input type="text" class="layui-input" name="img" value="{$detail['img']}" id="ad_img" style="display: inline-block;width: 400px;" />
                        <button type="button" class="layui-btn" id="upimg" style="display: inline-block">选择图片</button>
                        <div id="reupload" style="display: inline-block"></div>
                        <div class="layui-upload-list">
                            <img class="upload_img" src="<notempty name="detail.img">http://attachment.sc-csj.cn/{$detail['img']}</notempty>" style="max-height:100px;"/>
                        </div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color:red">*</span> 酒吧简介</label>
                    <div class="layui-input-block">
                        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
                    </div>
                </div>

                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">电话号码</label>
                    <div class="layui-input-inline">
                        <input type="text" name="sort" value="" class="layui-input">
                    </div>
                    <div class="layui-input-inline">
                        <div class="layui-form-mid layui-word-aux">填写酒吧联系座机</div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color:red">*</span> 酒吧简介</label>
                    <div class="layui-input-block">
                        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
                        这里是多图上传框
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label"><span style="color:red">*</span> 酒吧地址</label>
                        <div class="layui-input-inline">
                            <input type="text" name="start_time" id="" lay-verify="required" placeholder="省" value="" autocomplete="off" class="layui-input">
                        </div>
                        <div class="layui-input-inline">
                            <input type="text" name="start_time" id="" lay-verify="required" placeholder="市" value="" autocomplete="off" class="layui-input">
                        </div>
                        <div class="layui-input-inline">
                            <input type="text" name="start_time" id="" lay-verify="required" placeholder="区/县" value="" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                </div>

                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label"></label>
                    <div class="layui-input-block">
                        <input type="text" name="" value="" placeholder="具体地址" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label"><span style="color:red">*</span> 酒吧经度</label>
                        <div class="layui-input-inline">
                            <input type="text" name="start_time" id="" lay-verify="required" placeholder="" value="" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label"><span style="color:red">*</span> 酒吧纬度</label>
                        <div class="layui-input-inline">
                            <input type="text" name="end_time" id="" lay-verify="required" placeholder=""
                                   value="" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label"><span style="color:red">*</span> 营业时间</label>
                        <div class="layui-input-inline">
                            <input type="text" name="start_time" id="begin_time" lay-verify="required" placeholder="HH:mm:ss" value="{:$detail['start_time']}" autocomplete="off" class="layui-input">
                        </div>

                        <div class="layui-input-inline">
                            <input type="text" name="end_time" id="end_time" lay-verify="required" placeholder="HH:mm:ss" value="" autocomplete="off" class="layui-input">
                        </div>

                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label"><span style="color:red">*</span> 延期消费</label>
                        <div class="layui-input-inline">
                            <input type="text" name="start_time" id="delay_time" lay-verify="required" placeholder="HH:mm:ss" value="" autocomplete="off" class="layui-input">
                        </div>
                        <div class="layui-input-inline">
                            <div class="layui-form-mid layui-word-aux">线上订单客户最迟到店消费的时间</div>
                        </div>
                    </div>
                </div>

                <div class="layui-form-item" pane="">
                    <label class="layui-form-label">酒吧标签</label>
                    <div class="layui-input-block">
                        <input type="checkbox" name="tags[]" value="1" lay-skin="primary" title="WiFi">
                        <input type="checkbox" name="tags[]" value="2" lay-skin="primary" title="可刷卡">
                        <input type="checkbox" name="tags[]" value="3" lay-skin="primary" title="沙发位">
                        <input type="checkbox" name="tags[]" value="4" lay-skin="primary" title="无烟区">
                        <input type="checkbox" name="tags[]" value="5" lay-skin="primary" title="可停车">
                        <input type="checkbox" name="tags[]" value="6" lay-skin="primary" title="可吸烟">
                        <input type="checkbox" name="tags[]" value="7" lay-skin="primary" title="包厢">
                        <input type="checkbox" name="tags[]" value="8" lay-skin="primary" title="可存酒">
                    </div>
                </div>

                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label"><span style="color:red">*</span> 平均消费</label>
                    <div class="layui-input-inline">
                        <input type="text" name="price" value="{:$detail['price']}" lay-verify="required" class="layui-input">
                    </div>
                    <div class="layui-input-inline">
                        <div class="layui-form-mid layui-word-aux">输入酒吧平均消费水平 单位:元/月</div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color:red">*</span> 酒吧公告</label>
                    <div class="layui-input-block">
                        <textarea placeholder="请输入酒吧公告内容" class="layui-textarea"></textarea>
                    </div>
                </div>

                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label"><span style="color:red">*</span> 预定周期</label>
                    <div class="layui-input-inline">
                        <input type="text" name="price" value="" placeholder="请输入卡座最长预定周期" lay-verify="required" class="layui-input">
                    </div>
                    <div class="layui-input-inline">
                        <div class="layui-form-mid layui-word-aux">可预定卡座最大时长 单位:天</div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color:red">*</span> 商户状态</label>
                    <div class="layui-input-block adstatus">
                        <input type="radio" name="status" value="0" title="封禁">
                        <input type="radio" name="status" value="1" title="待审核">
                        <input type="radio" name="status" value="2" title="正常" checked>
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" lay-submit lay-filter="admin-form">立即提交</button>
                        <a  href="{:U('index')}" class="layui-btn layui-btn-danger">返回广告列表</a>
                    </div>
                </div>
            </form>
        </div>
    </fieldset>
</block>
<block name="myScript">
    <script type="text/javascript">
        $(function () {
            layui.use(['form','upload', 'laydate'], function(){
                var form = layui.form,
                    layer = layui.layer,
                    upload = layui.upload,
                    laydate = layui.laydate;

                //普通图片上传
                var uploadInst = upload.render({
                    elem: '#upimg'
                    ,url: "{:U('Upload/index', ['mold' => 'ad'])}"
                    ,done: function(res){
                        if (res.code != 0){
                            return layer.msg(res.msg);
                        }
                        //显示上传成功的图片
                        $('#ad_img').val(res.data.src);
                        $('.upload_img').prop('src','//attachment.sc-csj.cn/'+res.data.src);

                    }
                    ,error: function(){
                        //演示失败状态，并实现重传
                        var demoText = $('#reupload');
                        demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
                        demoText.find('.demo-reload').on('click', function(){
                            uploadInst.upload();
                        });
                    }
                });

                //时间选择器
                laydate.render({
                    elem: '#begin_time'
                    ,type: 'time'
                });
                laydate.render({
                    elem: '#end_time'
                    ,type: 'time'
                });
                laydate.render({
                    elem: '#delay_time'
                    ,type: 'time'
                });
            });
        })
    </script>

</block>